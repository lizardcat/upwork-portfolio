---
// src/pages/blog/[...slug].astro
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/layout/Navigation.astro';
import Footer from '../../components/layout/Footer.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();

const getPostImage = (slug: string) => {
  const imageMap: Record<string, string> = {
    'seo-content-strategy-2025': '/blog-1.jpg',
    'keyword-research-guide': '/blog-2.jpg',
    'on-page-seo-checklist': '/blog-3.jpg'
  };
  return imageMap[slug] || '/blog-1.jpg';
};
---

<Layout>
  <Navigation />
  
  <article class="pt-32 pb-16 bg-gray-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Article Header -->
      <header class="mb-12">
        <div class="mb-6">
          {post.data.category && (
            <span class="inline-block px-3 py-1 bg-violet-500/20 text-violet-400 text-sm font-semibold rounded-full">
              {post.data.category}
            </span>
          )}
        </div>
        
        <h1 class="text-4xl lg:text-5xl font-bold text-white mb-6 leading-tight">
          {post.data.title}
        </h1>
        
        <p class="text-xl text-gray-300 mb-8 leading-relaxed">
          {post.data.description}
        </p>
        
        <div class="flex items-center text-gray-400 text-sm mb-8">
          <span>By Alex Raza</span>
          <span class="mx-3">•</span>
          <time datetime={post.data.pubDate.toISOString()}>
            {post.data.pubDate.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long', 
              day: 'numeric'
            })}
          </time>
          {post.data.readTime && (
            <>
              <span class="mx-3">•</span>
              <span>{post.data.readTime}</span>
            </>
          )}
        </div>
        
        <!-- Featured Image -->
        <div class="mb-12">
          <img 
            src={getPostImage(post.slug)} 
            alt={post.data.title}
            class="w-full h-64 lg:h-80 object-cover rounded-xl border border-gray-700"
            width="800"
            height="400"
          />
        </div>
      </header>

      <!-- Article Content -->
      <div class="prose prose-lg prose-invert max-w-none blog-content">
        <Content />
      </div>

      <!-- Tags -->
      {post.data.tags && post.data.tags.length > 0 && (
        <div class="mt-12 pt-8 border-t border-gray-700">
          <h3 class="text-lg font-semibold text-white mb-4">Tags</h3>
          <div class="flex flex-wrap gap-2">
            {post.data.tags.map((tag) => (
              <span class="px-3 py-1 bg-gray-700 text-violet-400 text-sm rounded-full border border-violet-500/30">
                {tag}
              </span>
            ))}
          </div>
        </div>
      )}

      <!-- CTA Section -->
      <div class="mt-16 p-8 bg-gray-800 rounded-2xl border border-gray-700">
        <h3 class="text-2xl font-bold text-white mb-4">Need Expert SEO Content?</h3>
        <p class="text-gray-300 mb-6">
          I help businesses create SEO content that ranks higher and drives more traffic. Let's discuss your content strategy and how I can help you achieve your goals.
        </p>
        <a 
          href="https://www.upwork.com/freelancers/~0141cff0aab119da4c" 
          target="_blank" 
          rel="noopener noreferrer"
          class="inline-flex items-center px-6 py-3 bg-violet-500 text-white font-semibold rounded-lg hover:bg-violet-600 transition-colors"
        >
          Hire Me on Upwork
          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </a>
      </div>
    </div>
  </article>

  <Footer />
</Layout>

<style>
  /* Custom prose styles for better readability */
  .blog-content {
    @apply text-gray-300 leading-relaxed;
  }
  
  .blog-content :global(h1), 
  .blog-content :global(h2), 
  .blog-content :global(h3), 
  .blog-content :global(h4), 
  .blog-content :global(h5), 
  .blog-content :global(h6) {
    @apply text-white font-bold mt-8 mb-4;
  }
  
  .blog-content :global(h1) {
    @apply text-3xl mt-12 mb-6;
  }
  
  .blog-content :global(h2) {
    @apply text-2xl mt-10 mb-5;
  }
  
  .blog-content :global(h3) {
    @apply text-xl mt-8 mb-4;
  }
  
  .blog-content :global(h4) {
    @apply text-lg mt-6 mb-3;
  }
  
  .blog-content :global(p) {
    @apply mb-4 leading-7;
  }
  
  .blog-content :global(ul), 
  .blog-content :global(ol) {
    @apply my-4 ml-6;
  }
  
  .blog-content :global(li) {
    @apply my-2;
  }
  
  .blog-content :global(ul li) {
    @apply list-disc;
  }
  
  .blog-content :global(ol li) {
    @apply list-decimal;
  }
  
  .blog-content :global(a) {
    @apply text-violet-400 hover:text-violet-300 transition-colors underline;
  }
  
  .blog-content :global(code) {
    @apply bg-gray-800 text-violet-400 px-2 py-1 rounded text-sm border border-gray-700;
  }
  
  .blog-content :global(pre) {
    @apply bg-gray-800 border border-gray-700 rounded-lg p-4 overflow-x-auto my-6;
  }
  
  .blog-content :global(pre code) {
    @apply bg-transparent border-none p-0;
  }
  
  .blog-content :global(blockquote) {
    @apply border-l-4 border-violet-500 pl-6 italic text-gray-400 my-6;
  }
  
  .blog-content :global(strong) {
    @apply text-white font-semibold;
  }
  
  .blog-content :global(em) {
    @apply italic;
  }

  .blog-content :global(hr) {
    @apply border-gray-700 my-8;
  }
</style>