---
// src/components/sections/Experience.astro
import ExperienceItem from '../ui/ExperienceItem.astro';

const experiences = [
  {
    title: 'SEO Team Lead',
    company: 'BrightPageSEO',
    companyUrl: 'https://brightpageseo.com',
    location: 'Nairobi | Remote',
    period: 'March 2024 - Present',
    description: 'Leading SEO content strategies and managing team performance to drive organic growth. Overseeing keyword research initiatives, content optimization processes, and on-page SEO implementations. Mentoring team members on best practices for search engine optimization and content creation. Collaborating with cross-functional teams to align SEO strategies with business objectives.',
    skills: ['Team Leadership', 'SEO Strategy', 'Content Management', 'Performance Analytics', 'Team Training', 'Project Management']
  },
  {
    title: 'Proofreader',
    company: '7Sage',
    companyUrl: 'https://7sage.com',
    location: 'New York | Remote',
    period: 'October 2021 - Present',
    description: 'Providing meticulous proofreading services for law school admission materials at an education consulting firm. Reviewing personal statements, diversity statements, recommendations, and complete applications before submission to schools. Ensuring error-free, polished content that helps prospective law students present their best applications.',
    skills: ['Proofreading', 'Academic Writing', 'Legal Documents', 'Application Review', 'Quality Assurance', 'Educational Content']
  },
  {
    title: 'Content Editor',
    company: 'Enterprise DNA',
    companyUrl: 'https://blog.enterprisedna.co',
    location: 'New Zealand | Remote',
    period: 'March 2023 - February 2024',
    description: 'Served as content editor for a leading e-learning platform\'s blog. Generated keyword-optimized content using Ahrefs research and GPT-4 assistance. Edited and humanized AI-generated content, removing common AI patterns. Optimized content using SurferSEO for improved Google SERP rankings. Created quality visual content and managed team expansion by training and vetting new Upwork hires.',
    skills: ['Content Editing', 'SEO Optimization', 'AI Content Editing', 'Ahrefs', 'SurferSEO', 'Team Training', 'Visual Content Creation']
  },
  {
    title: 'Developmental Editor',
    company: 'The Book Clinic',
    companyUrl: 'https://thebookclinic.net',
    location: 'Michigan | Remote',
    period: 'January 2016 - July 2021',
    description: 'Worked as developmental editor at a comprehensive writing and publishing service. Guided clients through transforming concepts and manuscripts into polished books and ebooks. Contributed to client success stories including published works, award winners, bestseller achievements, and books selling tens of thousands of copies.',
    skills: ['Developmental Editing', 'Manuscript Development', 'Publishing Guidance', 'Client Collaboration', 'Book Production', 'Editorial Strategy']
  },
  {
    title: 'Content Writer',
    company: 'Ujumbe Ink',
    companyUrl: 'https://ujumbemagazine.com',
    location: 'Arusha, Tanzania',
    period: 'January 2011 - March 2014',
    description: 'Served as chief contributor and content writer for a quarterly publication in Tanzania. Produced high-quality editorial content and feature articles over three years, helping establish the magazine\'s editorial voice and readership engagement.',
    skills: ['Content Writing', 'Editorial Writing', 'Magazine Publishing', 'Feature Articles', 'Editorial Strategy', 'Cultural Content']
  }
];

// Show first 2 experiences by default
const initialExperiences = experiences.slice(0, 2);
const additionalExperiences = experiences.slice(2);
---

<section id="experience" class="py-20 bg-gray-900">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-4xl lg:text-5xl font-bold text-white mb-6">Work Experience</h2>
    </div>
    <div class="max-w-4xl mx-auto">
      <!-- Timeline -->
      <div class="relative">
        <!-- Vertical Line -->
        <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-700"></div>
        
        <!-- Initial experiences (always visible) -->
        <div id="initial-experiences">
          {initialExperiences.map(experience => (
            <ExperienceItem 
              title={experience.title}
              company={experience.company}
              companyUrl={experience.companyUrl}
              location={experience.location}
              period={experience.period}
              description={experience.description}
              skills={experience.skills}
            />
          ))}
        </div>

        <!-- Additional experiences (initially hidden) -->
        <div id="additional-experiences" class="hidden">
          {additionalExperiences.map(experience => (
            <ExperienceItem 
              title={experience.title}
              company={experience.company}
              companyUrl={experience.companyUrl}
              location={experience.location}
              period={experience.period}
              description={experience.description}
              skills={experience.skills}
            />
          ))}
        </div>

        <!-- Show More/Show Less Button -->
        {additionalExperiences.length > 0 && (
          <div class="text-center mt-12">
            <button 
              id="toggle-experience-btn"
              class="inline-flex items-center px-6 py-3 bg-violet-500/20 border border-violet-500 text-violet-400 font-semibold rounded-lg hover:bg-violet-500 hover:text-white transition-all duration-300 group"
            >
              <span id="btn-text">Show More Experience</span>
              <svg 
                id="btn-icon" 
                class="ml-2 w-5 h-5 transition-transform duration-300" 
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
          </div>
        )}
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggleBtn = document.getElementById('toggle-experience-btn');
    const additionalExperiences = document.getElementById('additional-experiences');
    const btnText = document.getElementById('btn-text');
    const btnIcon = document.getElementById('btn-icon');
    
    if (toggleBtn && additionalExperiences && btnText && btnIcon) {
      let isExpanded = false;
      
      toggleBtn.addEventListener('click', function() {
        if (isExpanded) {
          // Collapse
          additionalExperiences.classList.add('hidden');
          btnText.textContent = 'Show More Experience';
          btnIcon.style.transform = 'rotate(0deg)';
          isExpanded = false;
          
          // Smooth scroll to experience section
          document.getElementById('experience')?.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        } else {
          // Expand
          additionalExperiences.classList.remove('hidden');
          btnText.textContent = 'Show Less Experience';
          btnIcon.style.transform = 'rotate(180deg)';
          isExpanded = true;
        }
      });
    }
  });
</script>

<style>
  /* Smooth animation for the additional experiences */
  #additional-experiences {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  #additional-experiences.hidden {
    animation: fadeOut 0.3s ease-in-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-20px);
    }
  }
</style>